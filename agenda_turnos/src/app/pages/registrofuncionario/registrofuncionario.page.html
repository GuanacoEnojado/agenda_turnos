<ion-header>
  <ion-toolbar class="app-toolbar">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/main" class="app-back-button"></ion-back-button>
    </ion-buttons>
    <ion-title class="app-toolbar-title">Registrar Funcionario</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding app-background">
  <div class="form-container">
    <ion-card class="app-card">
      <ion-card-header class="app-card-header">
        <div class="header-icon">
          <ion-icon name="person-add-outline" class="title-icon"></ion-icon>
        </div>
        <ion-card-title class="app-card-title">Nuevo Funcionario</ion-card-title>
        <ion-card-subtitle class="app-card-subtitle">Complete la información del funcionario</ion-card-subtitle>
      </ion-card-header>
      
      <ion-card-content class="app-card-content">
        <form [formGroup]="registroForm" (ngSubmit)="onRegister()">
          <!-- Primer Nombre -->
          <ion-item class="app-form-item">
            <ion-label position="stacked">Primer Nombre *</ion-label>
            <ion-input
              type="text"
              formControlName="Name1"
              placeholder="Ingrese el primer nombre">
            </ion-input>
          </ion-item>
          <div class="app-error-message" *ngIf="registroForm.get('Name1')?.touched && registroForm.get('Name1')?.errors?.['required']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            El primer nombre es obligatorio
          </div>
          <div class="app-error-message" *ngIf="registroForm.get('Name1')?.touched && registroForm.get('Name1')?.errors?.['minlength']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            El primer nombre debe tener al menos 2 caracteres
          </div>

          <!-- Segundo Nombre -->
          <ion-item class="app-form-item">
            <ion-label position="stacked">Segundo Nombre *</ion-label>
            <ion-input
              type="text"
              formControlName="Name2"
              placeholder="Ingrese el segundo nombre">
            </ion-input>
          </ion-item>
          <div class="app-error-message" *ngIf="registroForm.get('Name2')?.touched && registroForm.get('Name2')?.errors?.['required']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            El segundo nombre es obligatorio
          </div>
          <div class="app-error-message" *ngIf="registroForm.get('Name2')?.touched && registroForm.get('Name2')?.errors?.['minlength']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            El segundo nombre debe tener al menos 2 caracteres
          </div>

          <!-- Email -->

          <ion-item class="app-form-item">
            <ion-label position="stacked">Email *</ion-label>
            <ion-input
              type="email"
              formControlName="email"
              placeholder="Ingrese el email">
            </ion-input>
          </ion-item>
          <div class="app-error-message" *ngIf="registroForm.get('email')?.touched && registroForm.get('email')?.errors?.['required']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            El email es obligatorio
          </div>
          <div class="app-error-message" *ngIf="registroForm.get('email')?.touched && registroForm.get('email')?.errors?.['email']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            Ingrese un email válido
          </div>

          <!-- Fecha de Nacimiento -->
          <ion-item class="app-form-item">
            <ion-label position="stacked">Fecha de Nacimiento *</ion-label>
            <ion-datetime
              formControlName="fecha_nacimiento"
              presentation="date"
              placeholder="Seleccione la fecha de nacimiento">
            </ion-datetime>
          </ion-item>
          <div class="app-error-message" *ngIf="registroForm.get('fecha_nacimiento')?.touched && registroForm.get('fecha_nacimiento')?.errors?.['required']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            La fecha de nacimiento es obligatoria
          </div>

          <!-- Fecha de Ingreso -->
          <ion-item class="app-form-item">
            <ion-label position="stacked">Fecha de Ingreso *</ion-label>
            <ion-datetime
              formControlName="fecha_ingreso"
              presentation="date"
              placeholder="Seleccione la fecha de ingreso">
            </ion-datetime>
          </ion-item>
          <div class="app-error-message" *ngIf="registroForm.get('fecha_ingreso')?.touched && registroForm.get('fecha_ingreso')?.errors?.['required']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            La fecha de ingreso es obligatoria
          </div>

          <!-- Turno -->
          <ion-item class="app-form-item">
            <ion-label position="stacked">Turno *</ion-label>
            <ion-select formControlName="turno" placeholder="Seleccione el turno">
              <ion-select-option value="4to_turno_modificado">4to Turno Modificado</ion-select-option>
              <ion-select-option value="3er_turno">3er Turno</ion-select-option>
              <ion-select-option value="4to_turno">4to Turno</ion-select-option>
              <ion-select-option value="diurno_hospital">Diurno Hospital</ion-select-option>
              <ion-select-option value="diurno_empresa">Diurno Empresa</ion-select-option>
              <ion-select-option value="volante">Volante</ion-select-option>
            </ion-select>
          </ion-item>
          <div class="app-error-message" *ngIf="registroForm.get('turno')?.touched && registroForm.get('turno')?.errors?.['required']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            El turno es obligatorio
          </div>

          <!-- Fecha Inicio Turno -->
          <ion-item class="app-form-item">
            <ion-label position="stacked">Fecha Inicio Turno *</ion-label>
            <ion-datetime
              formControlName="fechainicioturno"
              presentation="date"
              placeholder="Seleccione la fecha de inicio del turno">
            </ion-datetime>
          </ion-item>
          <div class="app-error-message" *ngIf="registroForm.get('fechainicioturno')?.touched && registroForm.get('fechainicioturno')?.errors?.['required']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            La fecha de inicio del turno es obligatoria
          </div>

          <!-- Contrato -->
          <ion-item class="app-form-item">
            <ion-label position="stacked">Tipo de Contrato *</ion-label>
            <ion-select formControlName="contrato" placeholder="Seleccione el tipo de contrato">
              <ion-select-option value="contrato_indefinido">Contrato Indefinido</ion-select-option>
              <ion-select-option value="contrato_fijo">Contrato Fijo</ion-select-option>
              <ion-select-option value="planta">Planta</ion-select-option>
              <ion-select-option value="contrata">Contrata</ion-select-option>
              <ion-select-option value="volante">Volante</ion-select-option>
            </ion-select>
          </ion-item>
          <div class="app-error-message" *ngIf="registroForm.get('contrato')?.touched && registroForm.get('contrato')?.errors?.['required']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            El tipo de contrato es obligatorio
          </div>

          <!-- Estado -->
          <ion-item class="app-form-item">
            <ion-label position="stacked">Estado *</ion-label>
            <ion-select formControlName="estado" placeholder="Seleccione el estado">
              <ion-select-option value="activo">Activo</ion-select-option>
              <ion-select-option value="inactivo">Inactivo</ion-select-option>
              <ion-select-option value="licencia">Licencia</ion-select-option>
              <ion-select-option value="vacaciones">Vacaciones</ion-select-option>
              <ion-select-option value="suspendido">Suspendido</ion-select-option>
            </ion-select>
          </ion-item>
          <div class="app-error-message" *ngIf="registroForm.get('estado')?.touched && registroForm.get('estado')?.errors?.['required']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            El estado es obligatorio
          </div>

          <!-- Nivel -->
          <ion-item class="app-form-item">
            <ion-label position="stacked">Nivel *</ion-label>
            <ion-select formControlName="nivel" placeholder="Seleccione el nivel">
              <ion-select-option value="tecnico">Técnico</ion-select-option>
              <ion-select-option value="manipulador">Manipulador</ion-select-option>
              <ion-select-option value="auxiliar">Auxiliar</ion-select-option>
              <ion-select-option value="profesional">Profesional</ion-select-option>
            </ion-select>
          </ion-item>
          <div class="app-error-message" *ngIf="registroForm.get('nivel')?.touched && registroForm.get('nivel')?.errors?.['required']">
            <ion-icon name="alert-circle-outline"></ion-icon>
            El nivel es obligatorio
          </div>

          <!-- Avatar URL (opcional) -->
          <ion-item class="app-form-item">
            <ion-label position="stacked">URL del Avatar (opcional)</ion-label>
            <ion-input
              type="url"
              formControlName="avatarUrl"
              placeholder="Ingrese URL de la imagen">
            </ion-input>
          </ion-item>

          <!-- Botones -->
          <div class="button-container">
            <ion-button
              expand="block"
              type="submit"
              [disabled]="!registroForm.valid"
              class="app-button app-button-primary">
              <ion-icon name="person-add-outline" slot="start"></ion-icon>
              Registrar Funcionario
            </ion-button>
            
            <ion-button 
              expand="block" 
              fill="outline" 
              (click)="main()"
              class="app-button app-button-outline">
              <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
              Volver al inicio
            </ion-button>
          </div>
        </form>>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
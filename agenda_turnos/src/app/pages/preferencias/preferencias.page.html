<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Preferencias</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="goBack()" fill="clear">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <!-- Header Card -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="settings-outline"></ion-icon>
        Configuración de la Aplicación
      </ion-card-title>
      <ion-card-subtitle>
        Personaliza la apariencia y el comportamiento de la aplicación
      </ion-card-subtitle>
    </ion-card-header>
  </ion-card>

  <!-- Theme Settings -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="color-palette-outline"></ion-icon>
        Tema de la Aplicación
      </ion-card-title>
      <ion-card-subtitle>
        Controla la apariencia visual de la aplicación
      </ion-card-subtitle>
    </ion-card-header>
    
    <ion-card-content>
      <!-- Theme Selection -->
      <ion-list>
        <ion-list-header>
          <ion-label>Seleccionar Tema</ion-label>
          <ion-button 
            fill="clear" 
            size="small" 
            (click)="showThemeInfo()"
            slot="end">
            <ion-icon name="information-circle-outline"></ion-icon>
          </ion-button>
        </ion-list-header>
        
        <ion-radio-group 
          [value]="currentTheme" 
          (ionChange)="onThemeChange($event)">
          <ion-item *ngFor="let option of themeOptions">
            <ion-radio 
              slot="start" 
              [value]="option.value">
            </ion-radio>
            <ion-label>
              <h2>{{ option.label }}</h2>
              <p *ngIf="option.value === 'auto'">
                Sigue la configuración del sistema
              </p>
              <p *ngIf="option.value === 'light'">
                Siempre usa el tema claro
              </p>
              <p *ngIf="option.value === 'dark'">
                Siempre usa el tema oscuro
              </p>
            </ion-label>
            <ion-icon 
              *ngIf="option.value === currentTheme"
              name="checkmark-circle" 
              color="success" 
              slot="end">
            </ion-icon>
          </ion-item>
        </ion-radio-group>
      </ion-list>

      <!-- Quick Theme Toggle -->
      <div class="theme-actions">
        <ion-button 
          expand="block" 
          fill="outline" 
          (click)="toggleTheme()"
          [disabled]="currentTheme === 'auto'">
          <ion-icon name="contrast-outline" slot="start"></ion-icon>
          Alternar Tema
        </ion-button>
        <ion-text color="medium">
          <p class="ion-text-center">
            <small>
              *El botón de alternar solo funciona en modo manual
            </small>
          </p>
        </ion-text>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- App Information -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="information-circle-outline"></ion-icon>
        Información de la Aplicación
      </ion-card-title>
    </ion-card-header>
    
    <ion-card-content>
      <ion-list class="preferences-info">
        <ion-item>
          <ion-icon name="calendar-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Sistema de Gestión de Turnos</h2>
            <p>Versión 1.0.0</p>
          </ion-label>
        </ion-item>
        
        <ion-item>
          <ion-icon name="build-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Tecnologías</h2>
            <p>Ionic 7 + Angular + TypeScript</p>
          </ion-label>
        </ion-item>
        
        <ion-item>
          <ion-icon name="people-outline" slot="start"></ion-icon>
          <ion-label>
            <h2>Funcionalidades</h2>
            <p>Gestión de funcionarios, turnos extra y calendarios</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Reset Options -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="refresh-outline"></ion-icon>
        Restablecer Configuración
      </ion-card-title>
      <ion-card-subtitle>
        Restaurar valores predeterminados
      </ion-card-subtitle>
    </ion-card-header>
    
    <ion-card-content>
      <ion-button 
        expand="block" 
        fill="outline" 
        color="warning"
        (click)="resetPreferences()">
        <ion-icon name="refresh-outline" slot="start"></ion-icon>
        Restablecer Preferencias
      </ion-button>
      
      <ion-text color="medium">
        <p class="ion-text-center">
          <small>
            Esto restablecerá todas las preferencias a sus valores predeterminados
          </small>
        </p>
      </ion-text>
    </ion-card-content>
  </ion-card>

  <!-- Navigation -->
  <div class="navigation-section">
    <ion-button 
      expand="block" 
      (click)="goBack()"
      color="primary">
      <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
      Volver al Menú Principal
    </ion-button>
  </div>
</ion-content>